<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="stylesheet" href="css.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.0/TweenMax.min.js" charset="utf-8" async defer></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.1/easing/EasePack.min.js" type="text/javascript" charset="utf-8" async defer></script>
	<title>Merry Christmas</title>
</head>
<body>
<div id="xmas">	
	
	<div id="t1" class="layer"></div>
	<div id="t2" class="layer"></div>
	<div id="t3" class="layer"></div>
	<div id="t4" class="layer"></div>
	<div id="t5" class="layer"></div>
	<div id="t6" class="layer"></div>
	<div id="t7" class="layer"></div>
	<div id="t8" class="layer"></div>
	<div id="t9" class="layer"></div>
	<div id="t10" class="layer"></div>
	<div id="t11" class="layer"></div>
	<div id="t" class="layer"></div>
	<div id="img-1" class="layer"></div>
	<div id="open1" class="layer"></div>
	<div id="open2" class="layer"></div>
	<canvas id="canvas"></canvas>
</div>
<p id="copy">Thu Huynh</p>
<p id="copy">Snow effect: http://codepen.io/rlemon/pen/qhHIn</p>
<p id="copy">Designed by freepik.com</p>
<audio id="music" autoplay>  
  <source src="img/song.mp3" type="audio/mpeg">
Your browser does not support the audio element.
</audio>


	<script type="text/javascript">
	//snow Robert Lemon
function Star(x, y, s /*radius*/ , p /*num points*/ ) {
  this.x = x;
  this.y = y;
  this.s = s;
  this.p = p;
  this.img = document.createElement('canvas');
  var context = this.img.getContext('2d'),
    len = this.s / 1.45;
  this.img.height = this.img.width = this.s * 2;
  context.translate(this.s, this.s);
  context.rotate((Math.PI * 1 / 10));
  context.beginPath();
  for (var i = 0; i < p; i++) {
    context.lineTo(0, s);
    context.rotate((Math.PI * 2 / (p * 2)));
    context.lineTo(0, -s);
    context.rotate((Math.PI * 2 / (p * 2)));
  }
  context.closePath();
  context.shadowBlur = this.s / 3;
  context.shadowColor = 'rgba(255,255,255,.9)';
  context.fillStyle = 'rgba(255,255,255,.45)';
  context.fill();
}
window.requestAnimationFrame = (function(){
  return  window.requestAnimationFrame       ||
          window.webkitRequestAnimationFrame ||
          window.mozRequestAnimationFrame    ||
          function( callback ){
            window.setTimeout(callback, 1000 / 60);
          };
})();
var canvas, context, height, width, stars;
setTimeout(init, 10);

function init() {
  canvas = document.getElementById('canvas');
  context = canvas.getContext('2d');
  height = canvas.height = document.body.offsetHeight;
  width = canvas.width = document.body.offsetWidth;
  stars = [];

  for (var i = 0; i < 150; i++) {
    var x = Math.random() * width,
      y = Math.random() * height,
      s = Math.random() * 5 + 5,
      p = Math.random() * 8 + 8;
    var s = new Star(x, y, s, p);
    s.vx = Math.random() * 2 - 1;
    s.vy = Math.random() * 2 + 1;
    s.r = Math.random() * 360;
    stars.push(s);
  }

  update();
  render();
}


function update() {
  for (var i = 0, l = stars.length; i < l; i++) {
    stars[i].r += stars[i].vx / 10;
    stars[i].x += stars[i].vx;
    stars[i].y += stars[i].vy;
    if (stars[i].y > height) {
      stars[i].y = -stars[i].s;
      stars[i].vx = Math.random() * 2 - 1;
      stars[i].vy = Math.random() * 2 + 1;
    }
  }
  setTimeout(update, 1000 / 30);
}

function render() {
  context.clearRect(0, 0, width, height);
  for (var i = 0, l = stars.length; i < l; i++) {
    context.save();
    context.translate(stars[i].x, stars[i].y);
    context.rotate(stars[i].r);
    context.drawImage(stars[i].img, 0, 0);
    context.restore();
  }
  requestAnimationFrame(render);
}
//animation
window.onload=function(){
	var tl = new TimelineLite();
	//open
	tl.to("#open1",1,{alpha:1})
		.to("#open2",1,{alpha:1},0)
		.to("#open1",4,{left: "-690px"},4)
		.to("#open2",4,{left: "670px"},4);
	//Frame 1
	tl.to("#t1",1,{alpha: 1})
		.to("#t2",1,{alpha: 1})
		.to("#t3",1,{alpha: 1})
		.to("#t4",1,{alpha: 1})
		.to("#t5",1,{alpha: 1})
		.to("#t6",1,{alpha: 1})
		.to("#t7",1,{alpha: 1})
		.to("#t8",1,{alpha: 1})
		.to("#t9",1,{alpha: 1})
		.to("#t10",1,{alpha: 1})
		.to("#t11",1,{alpha: 1})
		.to("#t",1,{alpha: 1})
		.to(["#t1","#t2","#t3","#t4","#t5","#t6","#t7","#t8","#t9","#t10","#t11"],0,{alpha:0})
		.to("#t8",0,{background: "url(img/g3.png)",top: "-600px",alpha:1})
		.to("#t9",0,{background: "url(img/g2.png)",top: "-600px",alpha:1})
		.to("#t10",0,{background: "url(img/g1.png)",top: "-600px",alpha:1})
		.to("#img-1",10,{left: "120%",top: "-40%"})
		.to("#t8",1,{top: "0",ease: Bounce.easeOut},"-=6")
		.to("#t9",1,{top: "0",ease: Bounce.easeOut},"-=4")
		.to("#t10",1,{top: "0",ease: Bounce.easeOut},"-=3");
	
	tl.to(["#t8","#t9","#t10","#t11","#t"],1,{alpha: 0,delay: 4});

	//Frame 3
	tl.to("#xmas",1,{background: "url(img/f3_bg.png)",delay: 2})
		.to("#t1",1.5,{alpha: 1,background: "url(img/f3_snow.png)"})
		.to("#t2",1.5,{alpha: 1,background: "url(img/f3_t_1.png)",ease: Bounce.easeOut})
		.to("#t3",1.5,{alpha: 1,background: "url(img/f3_t_2.png)",ease: Bounce.easeOut})
		.to("#t4",1.5,{alpha: 1,background: "url(img/f3_t_3.png)",ease: Bounce.easeOut})
		.to("#t5",1.5,{alpha: 1,background: "url(img/f3_1.png)",ease: Bounce.easeOut})
		.to("#t6",1.5,{alpha: 1,background: "url(img/f3_2.png)",ease: Bounce.easeOut})
		.to("#t7",1.5,{alpha: 1,background: "url(img/f3_3.png)",ease: Bounce.easeOut})
		.to(["#t1","#t2","#t3","#t4","#t5","#t6","#t7"],1,{alpha: 0,delay: 4});

	//Frame 4

	tl.to("#xmas",1,{background: "url(img/f4_1.png)"})		
		.to("#t2",0,{top: "-600px",background: "url(img/f4_g1.png)"})
		.to("#t3",0,{top: "-600px",background: "url(img/f4_g2.png)"})
		.to("#t4",0,{top: "-600px",background: "url(img/f4_g3.png)"})
		.to("#t5",0,{top: "-600px",background: "url(img/f4_g4.png)"})
		.to("#t6",0,{top: "-600px",background: "url(img/f4_g5.png)"})
		.to("#t7",0,{top: "-600px",background: "url(img/f4_g6.png)"})
		.to("#t8",0,{top: "-600px",background: "url(img/f4_g7.png)"})
		.to("#t9",0,{top: "-600px",background: "url(img/f4_g8.png)"})

		.to("#t2",1.5,{top: "0",alpha:1,background: "url(img/f4_g1.png)",ease: Bounce.easeOut})
		.to("#t3",1.5,{top: "0",alpha:1,background: "url(img/f4_g2.png)",ease: Bounce.easeOut})
		.to("#t4",1.5,{top: "0",alpha:1,background: "url(img/f4_g3.png)",ease: Bounce.easeOut})
		.to("#t5",1.5,{top: "0",alpha:1,background: "url(img/f4_g4.png)",ease: Bounce.easeOut})
		.to("#t6",1.5,{top: "0",alpha:1,background: "url(img/f4_g5.png)",ease: Bounce.easeOut})
		.to("#t7",1.5,{top: "0",alpha:1,background: "url(img/f4_g6.png)",ease: Bounce.easeOut})
		.to("#t8",1.5,{top: "0",alpha:1,background: "url(img/f4_g7.png)",ease: Bounce.easeOut})
		.to("#t9",1.5,{top: "0",alpha:1,background: "url(img/f4_g8.png)",ease: Bounce.easeOut})
		.to(["#t2","#t3","#t4","#t5","#t6","#t7","#t8","#t9"],1,{alpha: 0,delay: 4});
	//change close
	tl.to("#open2",2,{background: "url(img/finishSanta.png)"})
		.to("#open1",2,{background: "url(img/finishTuanloc.png)"})
		.to(["#open1","#open2"],1,{left: 0});

	}
	</script>

</body>
</html>